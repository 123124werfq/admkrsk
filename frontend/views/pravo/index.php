<?php
use yii\grid\GridView;

?>

<div class="row">
    <div class="col-2-third">
        <ul class="breadcrumbs">
            <li class="my-breadcrumbCurrentNode"><span class="s4-breadcrumb-arrowcont"><span style="height:9px;width:6px;position:relative;display:inline-block;overflow:hidden;" class="s4-clust s4-breadcrumb"><img src="" alt="" style="position:absolute;left:-0px !important;top:-0px !important;"></span></span><span class="my-breadcrumbCurrentNode">Документы</span></li>
        </ul>
        <div id="MSOZoneCell_WebPartctl00_ctl35_g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3" class="s4-wpcell-plain ms-webpartzone-cell ms-webpart-cell-vertical ms-fullWidth ">
            <div class="ms-webpart-chrome ms-webpart-chrome-vertical ms-webpart-chrome-fullWidth ">
                <div webpartid="0d8cd393-eba5-47a6-ab32-e2ae08138cb3" haspers="false" id="WebPartctl00_ctl35_g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3" width="100%" class="ms-WPBody noindex " allowdelete="false" allowexport="false" style=""><div id="ctl00_ctl35_g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3">





                        <div class="filter_layout custom-form">
                            <table cellpadding="0">
                                <tbody><tr><td colspan="4" class="field_filter">Полное название<br>
                                        <input name="ctl00$ctl35$g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3$fullname" type="text" id="ctl00_ctl35_g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3_fullname" style="width:98%;"></td></tr><tr valign="bottom"><td class="field_filter" nowrap="nowrap">Регистрационный номер<br>
                                        <input name="ctl00$ctl35$g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3$regnum" type="text" id="ctl00_ctl35_g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3_regnum" style="width:98%;"></td><td>&nbsp;&nbsp;</td><td class="field_filter" nowrap="nowrap">Дата регистрации
                                        <br><div class="datepicker"><input name="ctl00$ctl35$g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3$regdate" type="text" id="ctl00_ctl35_g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3_regdate" class="dtctrl"></div><div class="date-picker-wrapper no-shortcuts no-gap two-months" style="display: none; top: 472px; left: 523.5px; user-select: none;" unselectable="on"><div class="drp_top-bar"><div class="normal-top"><span class="selection-top">Выбрано: </span> <b class="start-day">...</b> <span class="separator-day"> - </span> <b class="end-day">...</b> <i class="selected-days">(<span class="selected-days-num">3</span> Дней)</i></div><div class="error-top">error</div><div class="default-top">Пожалуйста выберите диапазон</div><input type="button" class="apply-btn disabled hide" value="Применить"></div><div class="month-wrapper" style="width: 425px;">   <table class="month1" cellspacing="0" border="0" cellpadding="0">       <thead>           <tr class="caption">               <th>                   <span class="prev">&lt;                   </span>               </th>               <th colspan="5" class="month-name"><div class="month-element">октябрь</div> <div class="month-element">2019</div></th>               <th><span class="next">&gt;</span>               </th>           </tr>           <tr class="week-name"><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th><th>вс</th>       </tr></thead>       <tbody><tr><td><div time="1569779766462" data-tooltip="" class="day lastMonth  valid ">30</div></td><td><div time="1569866166462" data-tooltip="" class="day toMonth  valid ">1</div></td><td><div time="1569952566462" data-tooltip="" class="day toMonth  valid ">2</div></td><td><div time="1570038966462" data-tooltip="" class="day toMonth  valid ">3</div></td><td><div time="1570125366462" data-tooltip="" class="day toMonth  valid ">4</div></td><td><div time="1570211766462" data-tooltip="" class="day toMonth  valid ">5</div></td><td><div time="1570298166462" data-tooltip="" class="day toMonth  valid ">6</div></td></tr><tr><td><div time="1570384566462" data-tooltip="" class="day toMonth  valid ">7</div></td><td><div time="1570470966462" data-tooltip="" class="day toMonth  valid real-today">8</div></td><td><div time="1570557366462" data-tooltip="" class="day toMonth  valid ">9</div></td><td><div time="1570643766462" data-tooltip="" class="day toMonth  valid ">10</div></td><td><div time="1570730166462" data-tooltip="" class="day toMonth  valid ">11</div></td><td><div time="1570816566462" data-tooltip="" class="day toMonth  valid ">12</div></td><td><div time="1570902966462" data-tooltip="" class="day toMonth  valid ">13</div></td></tr><tr><td><div time="1570989366462" data-tooltip="" class="day toMonth  valid ">14</div></td><td><div time="1571075766462" data-tooltip="" class="day toMonth  valid ">15</div></td><td><div time="1571162166462" data-tooltip="" class="day toMonth  valid ">16</div></td><td><div time="1571248566462" data-tooltip="" class="day toMonth  valid ">17</div></td><td><div time="1571334966462" data-tooltip="" class="day toMonth  valid ">18</div></td><td><div time="1571421366462" data-tooltip="" class="day toMonth  valid ">19</div></td><td><div time="1571507766462" data-tooltip="" class="day toMonth  valid ">20</div></td></tr><tr><td><div time="1571594166462" data-tooltip="" class="day toMonth  valid ">21</div></td><td><div time="1571680566462" data-tooltip="" class="day toMonth  valid ">22</div></td><td><div time="1571766966462" data-tooltip="" class="day toMonth  valid ">23</div></td><td><div time="1571853366462" data-tooltip="" class="day toMonth  valid ">24</div></td><td><div time="1571939766462" data-tooltip="" class="day toMonth  valid ">25</div></td><td><div time="1572026166462" data-tooltip="" class="day toMonth  valid ">26</div></td><td><div time="1572112566462" data-tooltip="" class="day toMonth  valid ">27</div></td></tr><tr><td><div time="1572198966462" data-tooltip="" class="day toMonth  valid ">28</div></td><td><div time="1572285366462" data-tooltip="" class="day toMonth  valid ">29</div></td><td><div time="1572371766462" data-tooltip="" class="day toMonth  valid ">30</div></td><td><div time="1572458166462" data-tooltip="" class="day toMonth  valid ">31</div></td><td><div time="1572544566462" data-tooltip="" class="day nextMonth  valid ">1</div></td><td><div time="1572630966462" data-tooltip="" class="day nextMonth  valid ">2</div></td><td><div time="1572717366462" data-tooltip="" class="day nextMonth  valid ">3</div></td></tr></tbody>   </table><div class="gap" style="visibility: hidden; height: 10px;"><div class="gap-top-mask"></div><div class="gap-bottom-mask"></div><div class="gap-lines"><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div><div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div></div></div><table class="month2" cellspacing="0" border="0" cellpadding="0">   <thead>   <tr class="caption">       <th><span class="prev">&lt;</span>       </th>       <th colspan="5" class="month-name"><div class="month-element">ноябрь</div> <div class="month-element">2019</div></th>       <th>           <span class="next">&gt;</span>       </th>   </tr>   <tr class="week-name"><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th><th>вс</th>   </tr></thead>   <tbody><tr><td><div time="1572198966462" data-tooltip="" class="day lastMonth  valid ">28</div></td><td><div time="1572285366462" data-tooltip="" class="day lastMonth  valid ">29</div></td><td><div time="1572371766462" data-tooltip="" class="day lastMonth  valid ">30</div></td><td><div time="1572458166462" data-tooltip="" class="day lastMonth  valid ">31</div></td><td><div time="1572544566462" data-tooltip="" class="day toMonth  valid ">1</div></td><td><div time="1572630966462" data-tooltip="" class="day toMonth  valid ">2</div></td><td><div time="1572717366462" data-tooltip="" class="day toMonth  valid ">3</div></td></tr><tr><td><div time="1572803766462" data-tooltip="" class="day toMonth  valid ">4</div></td><td><div time="1572890166462" data-tooltip="" class="day toMonth  valid ">5</div></td><td><div time="1572976566462" data-tooltip="" class="day toMonth  valid ">6</div></td><td><div time="1573062966462" data-tooltip="" class="day toMonth  valid ">7</div></td><td><div time="1573149366462" data-tooltip="" class="day toMonth  valid ">8</div></td><td><div time="1573235766462" data-tooltip="" class="day toMonth  valid ">9</div></td><td><div time="1573322166462" data-tooltip="" class="day toMonth  valid ">10</div></td></tr><tr><td><div time="1573408566462" data-tooltip="" class="day toMonth  valid ">11</div></td><td><div time="1573494966462" data-tooltip="" class="day toMonth  valid ">12</div></td><td><div time="1573581366462" data-tooltip="" class="day toMonth  valid ">13</div></td><td><div time="1573667766462" data-tooltip="" class="day toMonth  valid ">14</div></td><td><div time="1573754166462" data-tooltip="" class="day toMonth  valid ">15</div></td><td><div time="1573840566462" data-tooltip="" class="day toMonth  valid ">16</div></td><td><div time="1573926966462" data-tooltip="" class="day toMonth  valid ">17</div></td></tr><tr><td><div time="1574013366462" data-tooltip="" class="day toMonth  valid ">18</div></td><td><div time="1574099766462" data-tooltip="" class="day toMonth  valid ">19</div></td><td><div time="1574186166462" data-tooltip="" class="day toMonth  valid ">20</div></td><td><div time="1574272566462" data-tooltip="" class="day toMonth  valid ">21</div></td><td><div time="1574358966462" data-tooltip="" class="day toMonth  valid ">22</div></td><td><div time="1574445366462" data-tooltip="" class="day toMonth  valid ">23</div></td><td><div time="1574531766462" data-tooltip="" class="day toMonth  valid ">24</div></td></tr><tr><td><div time="1574618166462" data-tooltip="" class="day toMonth  valid ">25</div></td><td><div time="1574704566462" data-tooltip="" class="day toMonth  valid ">26</div></td><td><div time="1574790966462" data-tooltip="" class="day toMonth  valid ">27</div></td><td><div time="1574877366462" data-tooltip="" class="day toMonth  valid ">28</div></td><td><div time="1574963766462" data-tooltip="" class="day toMonth  valid ">29</div></td><td><div time="1575050166462" data-tooltip="" class="day toMonth  valid ">30</div></td><td><div time="1575136566462" data-tooltip="" class="day nextMonth  valid ">1</div></td></tr></tbody></table><div class="dp-clearfix"></div><div class="time"><div class="time1"></div><div class="time2"></div></div><div class="dp-clearfix"></div></div><div class="footer"></div><div class="date-range-length-tip"></div></div></td><td class="ibutton2" valign="top"><br><input type="submit" name="ctl00$ctl35$g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3$ctl01" value="Поиск" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ctl35$g_0d8cd393_eba5_47a6_ab32_e2ae08138cb3$ctl01&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))"></td></tr></tbody></table></div><script type="text/javascript">
                            function adm_getElementByIdEnd(idEnd, tagName) {
                                var els = null;
                                if (idEnd != null && tagName != null) {
                                    els = document.getElementsByTagName(tagName.toString());

                                    for (var i = 0; i < els.length; i++) {
                                        var id = els[i].id;

                                        if (!id || id == null || id == "") {
                                            continue;
                                        }

                                        id = id.toString().toLowerCase();
                                        idEnd = idEnd.toString().toLowerCase();

                                        if (id.length < idEnd.length) {
                                            continue;
                                        }

                                        if (id.substr(id.length - idEnd.length, idEnd.length) == idEnd) {
                                            return els[i];
                                        }
                                    }
                                }

                                return null;
                            }
                            $(function() {
                                $('#'+adm_getElementByIdEnd('regdate','INPUT').id).datepicker();
                            });
                        </script>
                    </div><div class="ms-clear"></div></div>
            </div><div class="ms-PartSpacingVertical"></div>
        </div>

        <div class="content">
            <?php
                    echo GridView::widget([
                        'dataProvider' => $dataProvider,
                        'columns' => [
                            'type',
                            [
                                'class' => 'yii\grid\DataColumn',
                                'format' => 'html',
                                'value' => function ($data) {
                                    $content = "<p><a href='/pravo/detail?regnum={$data->regnum}'>{$data->subject}</a></p>";

                                    $changes = [];

                                    foreach ($data->links as $link)
                                    {
                                        if(!in_array($link->linkname, array_keys($changes)))
                                            $changes[$link->linkname] = [];

                                        $changes[$link->linkname][] = $link;
                                    }

                                    if(count($changes))
                                    {
                                        foreach ($changes as $lk => $linktype)
                                        {
                                            $content.="<b>{$lk}...</b><br><ul>";

                                            foreach ($linktype as $link)
                                                $content .= "<li><a href='/pravo/detail?regnum={$link->regnum}'>{$link->subject}</a></li>";

                                            $content.="</ul>";
                                        }
                                    }

                                    return $content;
                                },
                            ],
                            'regnum',
                            [
                                'class' => 'yii\grid\DataColumn',
                                'format' => 'html',
                                'value' => function ($data) {
                                    $parts = explode('-', $data->regdate);

                                    return $parts[2].".".$parts[1].".".$parts[0];
                                }
                            ]
                        ]
                    ]);

            ?>
        </div>
    </div>
</div>